import{a5 as Ue,a6 as Ee,a7 as Fe,a9 as Ne,aa as Ve,ab as Be}from"./theme.BXyykPlw.js";import{_ as ie,c as ae,W as B,A as V,a as me,i as Ge,b as fe,L as _e,r as he,e as $e,V as De,H as ze,h as je,N as de,g as He,S as We,P as Xe,j as ee,k as Ke,l as Ye,M as Je,v as le,y as ge,E as g,F as Qe,w as te,x as oe,u as Ze,B as X,D as qe,z as et,G as tt,C as rt,J as it,I as at,K as nt}from"./fmp4-remuxer.Ddl3CmK9.js";import{O as wt}from"./fmp4-remuxer.Ddl3CmK9.js";import"./framework.Bd8CMpNJ.js";var ye=function(){function f(){ae(this,f)}return ie(f,null,[{key:"getFrameDuration",value:function(t){return 20}},{key:"parseHeaderPackets",value:function(t){if(t.length){for(var i=new DataView(t.buffer,t.byteOffset,t.byteLength),e="",r=0;r<8;r++)e+=String.fromCodePoint(t[r]);if(e!=="OpusHead")throw new Error("Invalid Opus MagicSignature");var n=t[9];console.log("Pre-skip",t[10],t[11]);var a=i.getUint32(12,!0),s=i.getInt16(16,!0);if(a){var l="opus",u="opus",d=new Uint8Array(t.buffer,t.byteOffset+8,t.byteLength-8);return{outputGain:s,sampleRate:a,channelCount:n,config:d,codec:l,originCodec:u}}}}}]),f}(),st=500,ke=3,pe=1e3,ve=5e3,ot=1e3,ut=200,we=5e3,Te=5,ft=function(){function f(o,t,i){ae(this,f),this.videoTrack=o,this.audioTrack=t,this.metadataTrack=i,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastVideoDuration=0,this._keyFrameInNextChunk=!1,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0}return ie(f,[{key:"fix",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;i=Math.round(i*1e3);var n=this.videoTrack,a=this.audioTrack;(e||!r)&&(this._videoLastSample=null,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0),e&&!r&&(this._baseDtsInited=!1),this._baseDtsInited||this._calculateBaseDts(a,n),!r&&i&&(this._audioNextPts=this._videoNextDts=i);var s=this._baseDtsInited&&(this._videoTimestampBreak||!this.videoTrack.exist())&&(this._audioTimestampBreak||!this.audioTrack.exist());if(s&&this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(a),this._keyFrameInNextChunk=!1,this._fixVideo(n),this.metadataTrack.exist()){var l=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(u){u.pts=u.originPts-t._baseDts,u.time=Math.max(0,u.pts)/l}),this.metadataTrack.flvScriptSamples.forEach(function(u){u.pts=u.originPts-t._baseDts,u.time=Math.max(0,u.pts)/l})}n.samples.length&&(n.baseMediaDecodeTime=n.samples[0].dts),a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].pts*a.timescale/1e3)}},{key:"_fixVideo",value:function(t){var i=this,e=t.samples;if(e.length){e.forEach(function(D){D.dts-=i._baseDts,D.pts-=i._baseDts,D.keyframe&&(i._keyFrameInNextChunk=!0)});var r;if(t.fpsNum&&t.fpsDen)r=t.timescale*(t.fpsDen/t.fpsNum);else if(t.length>1){var n=t.samples[0],a=t.samples[e.length-1];r=Math.floor((a.dts-n.dts)/(e.length-1))}else r=this._lastVideoDuration||40;var s=e.pop();if(this._videoLastSample&&e.unshift(this._videoLastSample),this._videoLastSample=s,!!e.length){if(this._videoNextDts===void 0){var l=e[0];this._videoNextDts=l.dts}var u=e.length,d=0,m=e[0],y=this._videoNextDts-m.dts;if(Math.abs(y)>ut){if(Math.abs(m.dts-this._lastVideoExceptionChunkFirstDtsDot)>we){var S;this._lastVideoExceptionChunkFirstDtsDot=m.dts,t.warnings.push({type:B.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:m.dts,nextSampleDts:(S=e[1])===null||S===void 0?void 0:S.dts,sampleDuration:y})}this._videoTimestampBreak>=Te?(this._videoNextDts=m.dts,this._videoTimestampBreak=0):(m.dts+=y,m.pts+=y,this.audioTrack.exist()||(this._videoTimestampBreak=1))}for(var b=0;b<u;b++){var T=e[b].dts,A=e[b+1];b<u-1?d=A.dts-T:s?d=s.dts-T:d=r,(d>ot||d<0)&&(this._videoTimestampBreak++,Math.abs(T-this._lastVideoExceptionLargeGapDot)>we&&(this._lastVideoExceptionLargeGapDot=T,t.warnings.push({type:B.LARGE_VIDEO_GAP,time:T/t.timescale,dts:T,originDts:e[b].originDts,nextDts:this._videoNextDts,sampleDuration:d,refSampleDuration:r})),d=r),e[b].duration=d,this._videoNextDts+=d,this._lastVideoDuration=d}}}}},{key:"_fixAudio",value:function(t){var i=this,e=t.samples;e.length&&(e.forEach(function(r){r.dts=r.pts-=i._baseDts}),this._doFixAudioInternal(t,e,1e3))}},{key:"_calculateBaseDts",value:function(t,i){var e=t.samples,r=i.samples;if(!e.length&&!r.length)return!1;var n=1/0,a=1/0;e.length&&(t.baseDts=n=e[0].pts),r.length&&(i.baseDts=a=r[0].dts),this._baseDts=Math.min(n,a);var s=a-n;return Number.isFinite(s)&&Math.abs(s)>st&&i.warnings.push({type:B.LARGE_AV_SHIFT,videoBaseDts:a,audioBasePts:n,baseDts:this._baseDts,delta:s}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){var t=this._calculateBaseDts(this.audioTrack,this.videoTrack);t&&(this.audioTrack.exist()?this.videoTrack.exist()?this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts):this._baseDts-=this._audioNextPts:this._baseDts-=this._videoNextDts,this._videoTimestampBreak=0,this._audioTimestampBreak=0)}},{key:"_doFixAudioInternal",value:function(t,i,e){if(!t.sampleDuration)switch(t.codecType){case V.AAC:{t.sampleDuration=me.getFrameDuration(t.timescale,e);break}case V.OPUS:{t.sampleDuration=ye.getFrameDuration(t.samples,e);break}case V.G711PCMA:case V.G711PCMU:{t.sampleDuration=this._getG711Duration(t);break}default:console.error("can't fix audio codecType:",t.codecType);break}var r=t.sampleDuration,n=t.codecType===V.OPUS?20:t.codecType===V.AAC?1024:r*t.timescale/1e3;if(this._audioNextPts===void 0){var a=i[0];this._audioNextPts=a.pts}for(var s=0;s<i.length;s++){var l=this._audioNextPts,u=i[s],d=u.pts-l;if(s===0&&this._audioTimestampBreak>=Te&&this._keyFrameInNextChunk&&(l=this._audioNextPts=u.dts,d=0,this._audioTimestampBreak=0),!this._audioTimestampBreak&&d>=ke*r&&d<=pe&&!Ge){var m=this._getSilentFrame(t)||i[0].data.subarray(),y=Math.floor(d/r);Math.abs(u.pts-this._lastAudioExceptionGapDot)>ve&&(this._lastAudioExceptionGapDot=u.pts,t.warnings.push({type:B.AUDIO_FILLED,pts:u.pts,originPts:u.originPts,count:y,nextPts:l,refSampleDuration:r}));for(var S=0;S<y;S++){var b=new fe(Math.floor(this._audioNextPts+r)-Math.floor(this._audioNextPts),m,n);b.originPts=Math.floor(this._baseDts+l),i.splice(s,0,b),this._audioNextPts+=r,s++}s--}else if(d<=-ke*r&&d>=-1*pe)Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>ve&&(this._lastAudioExceptionOverlapDot=u.pts,t.warnings.push({type:B.AUDIO_DROPPED,pts:u.pts,originPts:u.originPts,nextPts:l,refSampleDuration:r})),i.splice(s,1),s--;else{if(Math.abs(d)>pe&&(this._audioTimestampBreak++,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>ve&&(this._lastAudioExceptionLargeGapDot=u.pts,t.warnings.push({type:B.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts,originPts:u.originPts,nextPts:l,sampleDuration:d,refSampleDuration:r}))),t.codecType===V.OPUS){var T=i[i.length-1];T&&(T.duration=u.pts-T.pts)}else u.dts=u.pts=l,u.duration=n;this._audioNextPts+=r}}}},{key:"_getG711Duration",value:function(t){var i=t.sampleSize,e=t.channelCount,r=t.sampleRate,n=t.samples[0];if(n)return n.data.byteLength*2/e/(i/8)/r*1e3}},{key:"_getSilentFrame",value:function(t){return t.codecType===V.AAC?me.getSilentFrame(t.codec,t.channelCount):new Uint8Array(8*t.sampleDuration*t.channelCount)}}]),f}(),Le=function(){function f(){ae(this,f)}return ie(f,null,[{key:"decode",value:function(t){for(var i=[],e=t,r=0,n=t.length;r<n;){if(e[r]<128){i.push(String.fromCharCode(e[r])),++r;continue}else if(!(e[r]<192)){if(e[r]<224){if(f._checkContinuation(e,r,1)){var a=(e[r]&31)<<6|e[r+1]&63;if(a>=128){i.push(String.fromCharCode(a&65535)),r+=2;continue}}}else if(e[r]<240){if(f._checkContinuation(e,r,2)){var s=(e[r]&15)<<12|(e[r+1]&63)<<6|e[r+2]&63;if(s>=2048&&(s&63488)!==55296){i.push(String.fromCharCode(s&65535)),r+=3;continue}}}else if(e[r]<248&&f._checkContinuation(e,r,3)){var l=(e[r]&7)<<18|(e[r+1]&63)<<12|(e[r+2]&63)<<6|e[r+3]&63;if(l>65536&&l<1114112){l-=65536,i.push(String.fromCharCode(l>>>10|55296)),i.push(String.fromCharCode(l&1023|56320)),r+=4;continue}}}i.push("ï¿½"),++r}return i.join("")}},{key:"_checkContinuation",value:function(t,i,e){var r=t;if(i+e<r.length){for(;e--;)if((r[++i]&192)!==128)return!1;return!0}else return!1}}]),f}(),lt=function(){function f(){ae(this,f)}return ie(f,null,[{key:"parse",value:function(t){if(!(t.length<3)){var i={},e=f._parseValue(new DataView(t.buffer,t.byteOffset,t.byteLength)),r=f._parseValue(new DataView(t.buffer,t.byteOffset+e.size,t.byteLength-e.size));return i[e.data]=r.data,i}}},{key:"_parseValue",value:function(t){var i=t.byteLength,e=t.getUint8(0),r=1,n=!1,a;switch(e){case 0:a=t.getFloat64(1),r+=8;break;case 1:{a=!!t.getUint8(1),r+=1;break}case 2:{var s=f._parseString(new DataView(t.buffer,t.byteOffset+r,t.byteLength-r)),l=s.data,u=s.size;a=l,r+=u}break;case 3:{a={};var d=0;for((t.getUint32(i-4)&16777215)===9&&(d=3);r<i-4;){var m=f._parseObject(new DataView(t.buffer,t.byteOffset+r,t.byteLength-r-d)),y=m.size,S=m.data,b=m.isEnd;if(b)break;a[S.name]=S.value,r+=y}if(r<=i-3){var T=t.getUint32(r-1)&16777215;T===9&&(r+=3)}}break;case 8:{a={},r+=4;var A=0;for((t.getUint32(i-4)&16777215)===9&&(A=3);r<i-8;){var D=f._parseObject(new DataView(t.buffer,t.byteOffset+r,t.byteLength-r-A)),I=D.size,O=D.data,R=D.isEnd;if(R)break;a[O.name]=O.value,r+=I}if(r<=i-3){var k=t.getUint32(r-1)&16777215;k===9&&(r+=3)}}break;case 9:a=void 0,r=1,n=!0;break;case 10:{a=[];var K=t.getUint32(1);r+=4;for(var Y=0;Y<K;Y++){var L=f._parseValue(new DataView(t.buffer,t.byteOffset+r,t.byteLength-r)),H=L.data,W=L.size;a.push(H),r+=W}}break;case 11:{var h=t.getFloat64(r)+t.getInt16(r+8)*6e4;a=new Date(h),r+=10}break;case 12:{var c=t.getUint32(1);r+=4,a="",c>0&&(a=Le.decode(new Uint8Array(t.buffer,t.byteOffset+r,c))),r+=c}break;default:r=i;break}return{data:a,size:r,isEnd:n}}},{key:"_parseString",value:function(t){var i=t.getUint16(0),e="";return i>0&&(e=Le.decode(new Uint8Array(t.buffer,t.byteOffset+2,i))),{data:e,size:2+i}}},{key:"_parseObject",value:function(t){if(!(t.byteLength<3)){var i=f._parseString(t),e=f._parseValue(new DataView(t.buffer,t.byteOffset+i.size,t.byteLength-i.size));return{data:{name:i.data,value:e.data},size:i.size+e.size,isEnd:e.isEnd}}}}]),f}(),$={MP3:2,G711A:7,G711M:8,AAC:10,OPUS:13},G=new _e("FlvDemuxer"),Re=function(){function f(o,t,i){ae(this,f),ee(this,"_headerParsed",!1),ee(this,"_remainingData",null),ee(this,"_gopId",0),ee(this,"_needAddMetaBeforeKeyFrameNal",!0),this.videoTrack=o||new Ke,this.audioTrack=t||new Ye,this.metadataTrack=i||new Je,this._fixer=new ft(this.videoTrack,this.audioTrack,this.metadataTrack)}return ie(f,[{key:"demux",value:function(t){var i,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3?arguments[3]:void 0,a=this.audioTrack,s=this.videoTrack,l=this.metadataTrack;if((e||!r)&&(this._remainingData=null),e&&(this._headerParsed=!1),e?(s.reset(),a.reset(),l.reset()):(s.samples=[],a.samples=[],l.seiSamples=[],l.flvScriptSamples=[],s.warnings=[],a.warnings=[],this._remainingData&&(t=$e(this._remainingData,t),this._remainingData=null)),!t.length)return{videoTrack:s,audioTrack:a,metadataTrack:l};var u=0;if(!this._headerParsed){if(!f.probe(t))throw new Error("Invalid flv file");a.present=(t[4]&4)>>>2!==0,s.present=(t[4]&1)!==0,this._headerParsed=!0,u=he(t,5)+4}for(var d=t.length,m,y,S,b,T;u+15<d&&(m=t[u],y=t[u+1]<<16|t[u+2]<<8|t[u+3],!(u+15+y>d));)S=(t[u+7]<<24>>>0)+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6],u+=11,b=t.subarray(u,u+y),m===8?this._parseAudio(b,S):m===9?(n&&(this.seamlessLoadingSwitching=!0),this._parseVideo(b,S)):m===18?this._parseScript(b,S):G.warn("Invalid tag type: ".concat(m)),u+=y,T=he(t,u),T!==11+y&&G.warn("Invalid PrevTagSize ".concat(T," (").concat(11+y,")")),u+=4;u<d&&(this._remainingData=t.subarray(u)),a.formatTimescale=s.formatTimescale=s.timescale=l.timescale=1e3,a.timescale=a.codecType===V.OPUS?1e3:a.sampleRate||0,!a.exist()&&a.hasSample()&&a.reset(),!s.exist()&&s.hasSample()&&s.reset();var A=l.flvScriptSamples[l.flvScriptSamples.length-1],D=A==null||(i=A.data)===null||i===void 0?void 0:i.onMetaData;return D&&(s!=null&&s.exist()&&(D.hasOwnProperty("duration")&&(s.duration=D.duration*1e3),D.hasOwnProperty("width")&&D.hasOwnProperty("height")&&(s.width=D.width,s.height=D.height)),a!=null&&a.exist()&&D.hasOwnProperty("duration")&&(a.duration=D.duration*1e3)),{videoTrack:s,audioTrack:a,metadataTrack:l}}},{key:"fix",value:function(t,i,e){return this._fixer.fix(t,i,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(t,i,e,r,n){return this.demux(t,i,e,n),this.fix(r,i,e)}},{key:"_parseAudio",value:function(t,i){if(t.length){var e=(t[0]&240)>>>4,r=this.audioTrack;if(e!==$.AAC&&e!==$.G711A&&e!==$.G711M&&e!==$.OPUS){G.warn("Unsupported sound format: ".concat(e)),r.reset();return}if(e!==$.AAC&&e!==$.OPUS){var n=(t[0]&12)>>2,a=(t[0]&2)>>1,s=t[0]&1;r.sampleRate=f.AUDIO_RATE[n],r.sampleSize=a?16:8,r.channelCount=s+1}switch(e){case $.G711A:case $.G711M:this._parseG711(t,i,e);break;case $.AAC:this._parseAac(t,i);break;case $.OPUS:this._parseOpus(t,i);break}}}},{key:"_parseOpus",value:function(t,i){var e=this.audioTrack,r=t[1];switch(e.codecType=V.OPUS,r){case 0:{var n=ye.parseHeaderPackets(t.subarray(2));n?(e.codec=n.codec,e.channelCount=n.channelCount,e.sampleRate=n.sampleRate,e.config=n.config,e.sampleDuration=ye.getFrameDuration([],e.timescale)):(e.reset(),G.warn("Cannot parse AudioSpecificConfig",t));break}case 1:{if(i==null)return;var a=new fe(i,t.subarray(2),e.sampleDuration);e.samples.push(a);break}default:G.warn("Unknown OpusPacketType: ".concat(r))}}},{key:"_parseG711",value:function(t,i,e){var r=this.audioTrack,n=t.subarray(1);if(!(n.byteLength<1)){var a=new fe(i,n);r.codecType=e===7?V.G711PCMA:V.G711PCMU,r.sampleRate=8e3,r.codec=r.codecType,r.samples.push(a)}}},{key:"_parseAac",value:function(t,i){var e=this.audioTrack;if(e.codecType=V.AAC,t[1]===0){var r=me.parseAudioSpecificConfig(t.subarray(2));r?(e.codec=r.codec,e.channelCount=r.channelCount,e.sampleRate=r.sampleRate,e.config=r.config,e.objectType=r.objectType,e.sampleRateIndex=r.samplingFrequencyIndex):(e.reset(),G.warn("Cannot parse AudioSpecificConfig",t))}else if(t[1]===1){if(i==null)return;e.samples.push(new fe(i,t.subarray(2)))}else G.warn("Unknown AACPacketType: ".concat(t[1]))}},{key:"_parseVideo",value:function(t,i){var e=this;if(!(t.length<6)){var r=(t[0]&240)>>>4,n=t[0]&15,a=this.videoTrack;if(n!==7&&n!==12){a.reset(),G.warn("Unsupported codecId: ".concat(n));return}var s=n===12;a.codecType=s?De.HEVC:De.AVC;var l=t[1],u=(t[2]<<16|t[3]<<8|t[4])<<8>>8;if(l===0){var d=t.subarray(5),m=s?ze.parseHEVCDecoderConfigurationRecord(d):je.parseAVCDecoderConfigurationRecord(d);if(m){var y=m.hvcC,S=m.sps,b=m.ppsArr,T=m.spsArr,A=m.vpsArr,D=m.nalUnitSize;y&&(a.hvcC=a.hvcC||y),S&&(a.codec=S.codec,a.width=S.width,a.height=S.height,a.sarRatio=S.sarRatio,a.fpsNum=S.fpsNum,a.fpsDen=S.fpsDen),T.length&&(a.sps=T),b.length&&(a.pps=b),A&&A.length&&(a.vps=A),D&&(a.nalUnitSize=D)}else G.warn("Cannot parse ".concat(s?"HEVC":"AVC","DecoderConfigurationRecord"),t)}else if(l===1){var I=de.parseAvcC(t.subarray(5),a.nalUnitSize);if(I=this._checkAddMetaNalToUnits(s,I,a),I&&I.length){var O=new He(i+u,i,I);if(this.seamlessLoadingSwitching&&i<a.lastKeyFrameDts)return;this.seamlessLoadingSwitching=!1,r===1&&(O.setToKeyframe(),a.lastKeyFrameDts=i),a.samples.push(O),I.forEach(function(R){var k=s?R[0]>>>1&63:R[0]&31;switch(k){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!s&&k!==5||s&&k===5)break;O.setToKeyframe();break;case 6:case 39:case 40:if(!s&&k!==6||s&&k===6)break;e.metadataTrack.seiSamples.push(new We(de.parseSEI(de.removeEPB(R),s),i+u));break}}),O.keyframe&&this._gopId++,O.gopId=this._gopId}else G.warn("Cannot parse NALUs",t)}else l===2||G.warn("Unknown AVCPacketType: ".concat(l))}}},{key:"_checkAddMetaNalToUnits",value:function(t,i,e){if(!t||!this._needAddMetaBeforeKeyFrameNal)return this._needAddMetaBeforeKeyFrameNal=!1,i;var r=i.map(function(n){return n[0]>>>1&63});return r.includes(32)?(this._needAddMetaBeforeKeyFrameNal=!1,i):(i.unshift(e.pps[0]),i.unshift(e.sps[0]),i.unshift(e.vps[0]),i.filter(Boolean))}},{key:"_parseScript",value:function(t,i){this.metadataTrack.flvScriptSamples.push(new Xe(lt.parse(t),i))}}],[{key:"probe",value:function(t){return t[0]!==70||t[1]!==76||t[2]!==86||t[3]!==1?!1:he(t,5)>=9}}]),f}();ee(Re,"AUDIO_RATE",[5500,11e3,22e3,44e3]);function Ae(f,o){var t=Object.keys(f);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(f);o&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(f,e).enumerable})),t.push.apply(t,i)}return t}function U(f){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?Ae(Object(t),!0).forEach(function(i){v(f,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach(function(i){Object.defineProperty(f,i,Object.getOwnPropertyDescriptor(t,i))})}return f}function C(){C=function(){return f};var f={},o=Object.prototype,t=o.hasOwnProperty,i=Object.defineProperty||function(h,c,p){h[c]=p.value},e=typeof Symbol=="function"?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",a=e.toStringTag||"@@toStringTag";function s(h,c,p){return Object.defineProperty(h,c,{value:p,enumerable:!0,configurable:!0,writable:!0}),h[c]}try{s({},"")}catch{s=function(c,p,w){return c[p]=w}}function l(h,c,p,w){var _=c&&c.prototype instanceof m?c:m,P=Object.create(_.prototype),M=new L(w||[]);return i(P,"_invoke",{value:R(h,p,M)}),P}function u(h,c,p){try{return{type:"normal",arg:h.call(c,p)}}catch(w){return{type:"throw",arg:w}}}f.wrap=l;var d={};function m(){}function y(){}function S(){}var b={};s(b,r,function(){return this});var T=Object.getPrototypeOf,A=T&&T(T(H([])));A&&A!==o&&t.call(A,r)&&(b=A);var D=S.prototype=m.prototype=Object.create(b);function I(h){["next","throw","return"].forEach(function(c){s(h,c,function(p){return this._invoke(c,p)})})}function O(h,c){function p(_,P,M,F){var N=u(h[_],h,P);if(N.type!=="throw"){var Z=N.arg,q=Z.value;return q&&typeof q=="object"&&t.call(q,"__await")?c.resolve(q.__await).then(function(J){p("next",J,M,F)},function(J){p("throw",J,M,F)}):c.resolve(q).then(function(J){Z.value=J,M(Z)},function(J){return p("throw",J,M,F)})}F(N.arg)}var w;i(this,"_invoke",{value:function(_,P){function M(){return new c(function(F,N){p(_,P,F,N)})}return w=w?w.then(M,M):M()}})}function R(h,c,p){var w="suspendedStart";return function(_,P){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(_==="throw")throw P;return W()}for(p.method=_,p.arg=P;;){var M=p.delegate;if(M){var F=k(M,p);if(F){if(F===d)continue;return F}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(w==="suspendedStart")throw w="completed",p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);w="executing";var N=u(h,c,p);if(N.type==="normal"){if(w=p.done?"completed":"suspendedYield",N.arg===d)continue;return{value:N.arg,done:p.done}}N.type==="throw"&&(w="completed",p.method="throw",p.arg=N.arg)}}}function k(h,c){var p=c.method,w=h.iterator[p];if(w===void 0)return c.delegate=null,p==="throw"&&h.iterator.return&&(c.method="return",c.arg=void 0,k(h,c),c.method==="throw")||p!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+p+"' method")),d;var _=u(w,h.iterator,c.arg);if(_.type==="throw")return c.method="throw",c.arg=_.arg,c.delegate=null,d;var P=_.arg;return P?P.done?(c[h.resultName]=P.value,c.next=h.nextLoc,c.method!=="return"&&(c.method="next",c.arg=void 0),c.delegate=null,d):P:(c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,d)}function K(h){var c={tryLoc:h[0]};1 in h&&(c.catchLoc=h[1]),2 in h&&(c.finallyLoc=h[2],c.afterLoc=h[3]),this.tryEntries.push(c)}function Y(h){var c=h.completion||{};c.type="normal",delete c.arg,h.completion=c}function L(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(K,this),this.reset(!0)}function H(h){if(h){var c=h[r];if(c)return c.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var p=-1,w=function _(){for(;++p<h.length;)if(t.call(h,p))return _.value=h[p],_.done=!1,_;return _.value=void 0,_.done=!0,_};return w.next=w}}return{next:W}}function W(){return{value:void 0,done:!0}}return y.prototype=S,i(D,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:y,configurable:!0}),y.displayName=s(S,a,"GeneratorFunction"),f.isGeneratorFunction=function(h){var c=typeof h=="function"&&h.constructor;return!!c&&(c===y||(c.displayName||c.name)==="GeneratorFunction")},f.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,S):(h.__proto__=S,s(h,a,"GeneratorFunction")),h.prototype=Object.create(D),h},f.awrap=function(h){return{__await:h}},I(O.prototype),s(O.prototype,n,function(){return this}),f.AsyncIterator=O,f.async=function(h,c,p,w,_){_===void 0&&(_=Promise);var P=new O(l(h,c,p,w),_);return f.isGeneratorFunction(c)?P:P.next().then(function(M){return M.done?M.value:P.next()})},I(D),s(D,a,"Generator"),s(D,r,function(){return this}),s(D,"toString",function(){return"[object Generator]"}),f.keys=function(h){var c=Object(h),p=[];for(var w in c)p.push(w);return p.reverse(),function _(){for(;p.length;){var P=p.pop();if(P in c)return _.value=P,_.done=!1,_}return _.done=!0,_}},f.values=H,L.prototype={constructor:L,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!h)for(var c in this)c.charAt(0)==="t"&&t.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=void 0)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var c=this;function p(N,Z){return P.type="throw",P.arg=h,c.next=N,Z&&(c.method="next",c.arg=void 0),!!Z}for(var w=this.tryEntries.length-1;w>=0;--w){var _=this.tryEntries[w],P=_.completion;if(_.tryLoc==="root")return p("end");if(_.tryLoc<=this.prev){var M=t.call(_,"catchLoc"),F=t.call(_,"finallyLoc");if(M&&F){if(this.prev<_.catchLoc)return p(_.catchLoc,!0);if(this.prev<_.finallyLoc)return p(_.finallyLoc)}else if(M){if(this.prev<_.catchLoc)return p(_.catchLoc,!0)}else{if(!F)throw new Error("try statement without catch or finally");if(this.prev<_.finallyLoc)return p(_.finallyLoc)}}}},abrupt:function(h,c){for(var p=this.tryEntries.length-1;p>=0;--p){var w=this.tryEntries[p];if(w.tryLoc<=this.prev&&t.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var _=w;break}}_&&(h==="break"||h==="continue")&&_.tryLoc<=c&&c<=_.finallyLoc&&(_=null);var P=_?_.completion:{};return P.type=h,P.arg=c,_?(this.method="next",this.next=_.finallyLoc,d):this.complete(P)},complete:function(h,c){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&c&&(this.next=c),d},finish:function(h){for(var c=this.tryEntries.length-1;c>=0;--c){var p=this.tryEntries[c];if(p.finallyLoc===h)return this.complete(p.completion,p.afterLoc),Y(p),d}},catch:function(h){for(var c=this.tryEntries.length-1;c>=0;--c){var p=this.tryEntries[c];if(p.tryLoc===h){var w=p.completion;if(w.type==="throw"){var _=w.arg;Y(p)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(h,c,p){return this.delegate={iterator:H(h),resultName:c,nextLoc:p},this.method==="next"&&(this.arg=void 0),d}},f}function Se(f){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Se(f)}function Ce(f,o,t,i,e,r,n){try{var a=f[r](n),s=a.value}catch(l){t(l);return}a.done?o(s):Promise.resolve(s).then(i,e)}function x(f){return function(){var o=this,t=arguments;return new Promise(function(i,e){var r=f.apply(o,t);function n(s){Ce(r,i,e,n,a,"next",s)}function a(s){Ce(r,i,e,n,a,"throw",s)}n(void 0)})}}function ne(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")}function Pe(f,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(f,xe(i.key),i)}}function se(f,o,t){return o&&Pe(f.prototype,o),t&&Pe(f,t),Object.defineProperty(f,"prototype",{writable:!1}),f}function v(f,o,t){return o=xe(o),o in f?Object.defineProperty(f,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):f[o]=t,f}function Ie(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(o&&o.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),o&&be(f,o)}function ce(f){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(f)}function be(f,o){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},be(f,o)}function ct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function ht(f,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(f)}function Me(f){var o=ct();return function(){var i=ce(f),e;if(o){var r=ce(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return ht(this,e)}}function dt(f,o){if(typeof f!="object"||f===null)return f;var t=f[Symbol.toPrimitive];if(t!==void 0){var i=t.call(f,o||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(f)}function xe(f){var o=dt(f,"string");return typeof o=="symbol"?o:String(o)}var pt=function(){function f(){ne(this,f),v(this,"_ttfb",0),v(this,"_demuxStart",0),v(this,"_demuxEnd",0),v(this,"_demuxCost",0),v(this,"_remuxStart",0),v(this,"_remuxEnd",0),v(this,"_remuxCost",0),v(this,"_appendStart",0),v(this,"_appendEnd",0),v(this,"_appendCost",0)}return se(f,[{key:"set",value:function(t,i){this["_".concat(t)]=i}},{key:"start",value:function(t){this["_".concat(t,"Start")]=Date.now()}},{key:"end",value:function(t){this["_".concat(t,"End")]=Date.now(),this["_".concat(t,"Cost")]=this["_".concat(t,"Cost")]+(this["_".concat(t,"End")]-this["_".concat(t,"Start")])}},{key:"transferCost",get:function(){return{ttfbCost:this._ttfb,demuxCost:this._demuxCost,remuxCost:this._remuxCost,appendCost:this._appendCost}}}]),f}(),Q={TTFB:"ttfb",DEMUX:"demux",REMUX:"remux",APPEND:"append"},j=new le("BufferService"),vt=function(){function f(o,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ne(this,f),v(this,"flv",null),v(this,"_demuxer",new Re),v(this,"_remuxer",null),v(this,"_mse",null),v(this,"_softVideo",null),v(this,"_sourceCreated",!1),v(this,"_needInitSegment",!0),v(this,"_discontinuity",!0),v(this,"_contiguous",!1),v(this,"_initSegmentId",""),v(this,"_cachedBuffer",null),v(this,"_demuxStartTime",0),v(this,"_opts",null),this.flv=o,this._opts=i,t?this._softVideo=t:(this._remuxer=new Qe(this._demuxer.videoTrack,this._demuxer.audioTrack),this._mse=new ge(null,{preferMMS:typeof i.preferMMS=="boolean"?i.preferMMS:!!i.perferMMS}),this._mse.bindMedia(o.media))}return se(f,[{key:"baseDts",get:function(){var t,i;return(t=this._demuxer)===null||t===void 0||(i=t._fixer)===null||i===void 0?void 0:i._baseDts}},{key:"blobUrl",get:function(){var t;return(t=this._mse)===null||t===void 0?void 0:t.url}},{key:"isFull",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge.VIDEO;return this._mse.isFull(t)}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!0,this._initSegmentId=""}},{key:"unContiguous",value:function(t){this._contiguous=!1,this._demuxStartTime=t}},{key:"reset",value:function(){var o=x(C().mark(function i(){var e,r=arguments;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=r.length>0&&r[0]!==void 0?r[0]:!1,!(this._mse&&!e)){a.next=6;break}return a.next=4,this._mse.unbindMedia();case 4:return a.next=6,this._mse.bindMedia(this.flv.media);case 6:this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!1,this._sourceCreated=!1,this._initSegmentId="",this.resetSeamlessSwitchStats();case 12:case"end":return a.stop()}},i,this)}));function t(){return o.apply(this,arguments)}return t}()},{key:"resetSeamlessSwitchStats",value:function(){this.seamlessLoadingSwitch=null,this.seamlessLoadingSwitching=!1,this._demuxer&&(this._demuxer.seamlessLoadingSwitching=!1)}},{key:"endOfStream",value:function(){var o=x(C().mark(function i(){return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._mse){r.next=7;break}if(!this._sourceCreated){r.next=5;break}return r.next=4,this._mse.endOfStream();case 4:this.flv.emit(g.BUFFEREOS);case 5:r.next=8;break;case 7:this._softVideo&&this._softVideo.endOfStream();case 8:case"end":return r.stop()}},i,this)}));function t(){return o.apply(this,arguments)}return t}()},{key:"updateDuration",value:function(){var o=x(C().mark(function i(e){return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._mse){n.next=7;break}if(this._mse.isOpened){n.next=4;break}return n.next=4,this._mse.open();case 4:return j.debug("update duration",e),n.next=7,this._mse.updateDuration(e);case 7:case"end":return n.stop()}},i,this)}));function t(i){return o.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var o=x(C().mark(function i(){return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._mse){r.next=3;break}return r.next=3,this._mse.unbindMedia();case 3:this._mse=null,this._softVideo=null,this._demuxer=null,this._remuxer=null;case 7:case"end":return r.stop()}},i,this)}));function t(){return o.apply(this,arguments)}return t}()},{key:"appendBuffer",value:function(){var o=x(C().mark(function i(e){var r=this,n,a,s,l,u,d,m,y,S,b,T,A,D,I,O,R,k,K;return C().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(n=!1,this._cachedBuffer&&(e=Ze(this._cachedBuffer,e),this._cachedBuffer=null),a=this._demuxer,!(!e||!e.length||!a)){L.next=5;break}return L.abrupt("return");case 5:L.prev=5,this.flv._transferCost.start(Q.DEMUX),a.demuxAndFix(e,this.seamlessLoadingSwitching||this._discontinuity,this._contiguous,this._demuxStartTime,this.seamlessLoadingSwitching),this.seamlessLoadingSwitching=!1,this.flv._transferCost.end(Q.DEMUX),L.next=15;break;case 12:throw L.prev=12,L.t0=L.catch(5),new te(oe.DEMUX,oe.SUB_TYPES.FLV,L.t0);case 15:if(s=a.videoTrack,l=a.audioTrack,u=a.metadataTrack,!this.seamlessLoadingSwitch){L.next=25;break}if(d=s.samples.findIndex(function(H){return H.originDts===s.lastKeyFrameDts}),!(d>=0)){L.next=25;break}return s.samples.splice(d),L.next=22,this.seamlessLoadingSwitch();case 22:this.seamlessLoadingSwitch=null,e=null,n=!0;case 25:if(m=s.exist(),y=l.exist(),this._opts.onlyAudio&&(m=!1,s.present=!1),this._opts.onlyVideo&&(y=!1,l.present=!1),!(!m&&s.present||!y&&l.present)){L.next=42;break}if(S=0,b=m?s:y?l:void 0,b&&b.samples.length&&(S=(b.samples[b.samples.length-1].originPts-b.samples[0].originPts)/b.timescale*1e3),!(S>this._opts.analyzeDuration)){L.next=40;break}j.warn("analyze duration exceeded, ".concat(S,"ms"),b),s.present=m,l.present=y,this.flv.emit(g.ANALYZE_DURATION_EXCEEDED,{duration:S}),L.next=42;break;case 40:return this._cachedBuffer=e,L.abrupt("return");case 42:if(T=s.type,A=l.type,this._fireEvents(s,l,u),n||(this._discontinuity=!1,this._contiguous=!0,this._demuxStartTime=0),D=this._mse,I=function(){var W;if((W=r.flv)!==null&&W!==void 0&&W.emit){var h;(h=r.flv)===null||h===void 0||h.emit(g.APPEND_BUFFER,{})}},this.flv.emit(g.DEMUXED_TRACK,{videoTrack:s}),O="".concat(s.codec,"/").concat(s.width,"/").concat(s.height,"/").concat(l.codec,"/").concat(l.config),O!==this._initSegmentId&&(this._needInitSegment=!0,this._initSegmentId=O,this._emitMetaParsedEvent(s,l)),!D){L.next=83;break}if(this._sourceCreated){L.next=59;break}return L.next=55,D.open();case 55:m&&(j.log("codec: video/mp4;codecs=".concat(s.codec)),D.createSource(T,"video/mp4;codecs=".concat(s.codec))),y&&(j.log("codec: audio/mp4;codecs=".concat(l.codec)),D.createSource(A,"audio/mp4;codecs=".concat(l.codec))),this._sourceCreated=!0,this.flv.emit(g.SOURCEBUFFER_CREATED);case 59:L.prev=59,this._needInitSegment&&!this._opts.mseLowLatency&&(s.duration=this._opts.durationForMSELowLatencyOff*s.timescale,l.duration=this._opts.durationForMSELowLatencyOff*y.timescale),this.flv._transferCost.start(Q.REMUX),R=this._remuxer.remux(this._needInitSegment),this.flv._transferCost.end(Q.REMUX),L.next=69;break;case 66:throw L.prev=66,L.t1=L.catch(59),new te(oe.REMUX,oe.SUB_TYPES.FMP4,L.t1);case 69:if(!(this._needInitSegment&&!R.videoInitSegment&&!R.audioInitSegment)){L.next=71;break}return L.abrupt("return");case 71:return this._needInitSegment=!1,k=[],R.videoInitSegment&&k.push(D.append(T,R.videoInitSegment)),R.audioInitSegment&&k.push(D.append(A,R.audioInitSegment)),R.videoSegment&&k.push(D.append(T,R.videoSegment)),R.audioSegment&&k.push(D.append(A,R.audioSegment)),this.flv._transferCost.start(Q.APPEND),K=Promise.all(k),K.then(I).then(function(){r.flv._transferCost.end(Q.APPEND),I()}),L.abrupt("return",K);case 83:this._softVideo&&(this._softVideo.appendBuffer(s,l),I());case 84:case"end":return L.stop()}},i,this,[[5,12],[59,66]])}));function t(i){return o.apply(this,arguments)}return t}()},{key:"evictBuffer",value:function(){var o=x(C().mark(function i(e){var r=this,n,a,s,l;return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=this.flv.media,!(!this._mse||!this._demuxer||!n||!e||e<0)){d.next=3;break}return d.abrupt("return");case 3:if(a=n.currentTime,s=a-e,!(s<=0)){d.next=7;break}return d.abrupt("return");case 7:if(l=X.start(X.get(n)),!(l+1>=s)){d.next=10;break}return d.abrupt("return");case 10:return d.abrupt("return",this._mse.clearBuffer(0,s).then(function(){return r.flv.emit(g.REMOVE_BUFFER,{removeEnd:s})}));case 11:case"end":return d.stop()}},i,this)}));function t(i){return o.apply(this,arguments)}return t}()},{key:"_emitMetaParsedEvent",value:function(t,i){t.exist()&&this.flv.emit(g.METADATA_PARSED,{type:"video",track:t,meta:{codec:t.codec,timescale:t.timescale,width:t.width,height:t.height,sarRatio:t.sarRatio,baseDts:t.baseDts}}),i.exist()&&this.flv.emit(g.METADATA_PARSED,{type:"audio",track:i,meta:{codec:i.codec,channelCount:i.channelCount,sampleRate:i.sampleRate,timescale:i.timescale,baseDts:i.baseDts}}),j.debug("track parsed",t,i)}},{key:"_fireEvents",value:function(t,i,e){var r=this;j.debug("videoTrack samples count: ".concat(t.samples.length,", audioTrack samples count: ").concat(i.samples.length)),e.flvScriptSamples.forEach(function(n){r.flv.emit(g.FLV_SCRIPT_DATA,n),j.debug("flvScriptData",n)}),t.samples.forEach(function(n){n.keyframe&&r.flv.emit(g.KEYFRAME,{pts:n.originPts})}),t.warnings.forEach(function(n){var a;switch(n.type){case B.LARGE_AV_SHIFT:a=g.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case B.LARGE_VIDEO_GAP:a=g.LARGE_VIDEO_DTS_GAP_DETECT;break;case B.LARGE_VIDEO_GAP_BETWEEN_CHUNK:a=g.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}a&&r.flv.emit(g.STREAM_EXCEPTION,U(U({},n),{},{type:a})),j.warn("video exception",n)}),i.warnings.forEach(function(n){var a;switch(n.type){case B.LARGE_AUDIO_GAP:a=g.LARGE_AUDIO_DTS_GAP_DETECT;break;case B.AUDIO_FILLED:a=g.AUDIO_GAP_DETECT;break;case B.AUDIO_DROPPED:a=g.AUDIO_OVERLAP_DETECT;break}a&&r.flv.emit(g.STREAM_EXCEPTION,U(U({},n),{},{type:a})),j.warn("audio exception",n)}),e.seiSamples.forEach(function(n){r.flv.emit(g.SEI,U(U({},n),{},{sei:{code:n.data.type,content:n.data.payload,dts:n.pts}}))})}}]),f}();function mt(f){var o=U({retryCount:3,retryDelay:1e3,disconnectRetryCount:0,loadTimeout:1e4,maxReaderInterval:5e3,preloadTime:5,defaultVodLoadSize:1e7,isLive:!1,softDecode:!1,bufferBehind:10,maxJumpDistance:3,analyzeDuration:2e4,seamlesslyReload:!1,keepStatusAfterSwitch:!0,onlyVideo:!1,onlyAudio:!1,preferMMS:!1,mseLowLatency:!0,durationForMSELowLatencyOff:6,chunkCountForSpeed:50,skipChunkSize:1e3,longtimeNoReceived:3e3,enableStartGapJump:!0},f);return o.isLive&&o.preloadTime&&(o.maxLatency||(o.maxLatency=o.preloadTime*2),o.targetLatency||(o.targetLatency=o.preloadTime),(o.disconnectTime===null||o.disconnectTime===void 0)&&(o.disconnectTime=o.maxLatency)),o}function Oe(f,o){var t=0,i=f.length-1,e=0,r=0,n=i;for(o<f[0]&&(t=0,r=n+1);r<=n;)if(e=r+Math.floor((n-r)/2),e===i||o>=f[e]&&o<f[e+1]){t=e;break}else f[e]<o?r=e+1:n=e-1;return t}var z=new le("flv"),ue=.1,_t=.3,re=function(f){Ie(t,f);var o=Me(t);function t(i){var e;return ne(this,t),e=o.call(this),v(E(e),"media",null),v(E(e),"_loading",!1),v(E(e),"_opts",null),v(E(e),"_bufferService",null),v(E(e),"_gapService",null),v(E(e),"_stats",null),v(E(e),"_mediaLoader",null),v(E(e),"_maxChunkWaitTimer",null),v(E(e),"_tickTimer",null),v(E(e),"_tickInterval",500),v(E(e),"_urlSwitching",!1),v(E(e),"_seamlessSwitching",!1),v(E(e),"_disconnectRetryCount",0),v(E(e),"_preLoadEndPoint",0),v(E(e),"_keyframes",null),v(E(e),"_acceptRanges",!0),v(E(e),"_onProgress",function(){var r=x(C().mark(function n(a,s,l,u){var d,m,y,S,b,T,A,D,I,O;return C().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(d=l.startTime,m=l.endTime,y=l.st,S=l.firstByteTime,e._loading=!s,e._firstProgressEmit){k.next=13;break}if(e.media){k.next=6;break}return(b=e._mediaLoader)===null||b===void 0||b.cancel(),k.abrupt("return");case 6:T=u.headers,A=y?S-y:m-d,e.emit(g.TTFB,{url:e._opts.url,responseUrl:u.url,elapsed:A}),e.emit(g.LOAD_RESPONSE_HEADERS,{headers:T}),e._transferCost.set(Q.TTFB,A),e._acceptRanges=!!(T!=null&&T.get("Accept-Ranges"))||!!(T!=null&&T.get("Content-Range")),e._firstProgressEmit=!0;case 13:if(e._bufferService){k.next=15;break}return k.abrupt("return");case 15:return clearTimeout(e._maxChunkWaitTimer),e._bandwidthService.addChunkRecord(a==null?void 0:a.byteLength,m-d),k.prev=17,k.next=20,e._bufferService.appendBuffer(a);case 20:(D=e._bufferService)===null||D===void 0||D.evictBuffer(e._opts.bufferBehind),k.next=33;break;case 23:if(k.prev=23,k.t0=k.catch(17),!(!e.isLive&&e._bufferService.isFull())){k.next=32;break}return k.next=28,e._mediaLoader.cancel();case 28:return e._loading=!1,I=e.bufferInfo().remaining,e._opts.preloadTime=parseInt(I)/2,k.abrupt("return");case 32:return k.abrupt("return",e._emitError(te.create(k.t0)));case 33:if(e._urlSwitching&&(e._urlSwitching=!1,e.emit(g.SWITCH_URL_SUCCESS,{url:e._opts.url})),e._seamlessSwitching&&(e._seamlessSwitching=!1,e._tick()),!(s&&!e.media.seeking)){k.next=40;break}return e.emit(g.LOAD_COMPLETE),z.debug("load done"),e.isLive&&e._disconnectRetryCount<=0&&e._end(),k.abrupt("return");case 40:if(e.isLive){k.next=42;break}return k.abrupt("return");case 42:O=e._opts.maxReaderInterval,O&&e._firstProgressEmit&&(clearTimeout(e._maxChunkWaitTimer),e._maxChunkWaitTimer=setTimeout(function(){if(e._disconnectRetryCount){e._disconnectRetryCount--,e.load();return}z.debug("onMaxChunkWait",O),e._end()},O));case 44:case"end":return k.stop()}},n,null,[[17,23]])}));return function(n,a,s,l){return r.apply(this,arguments)}}()),v(E(e),"_onRetryError",function(r,n){z.debug("load retry",r,n),e.emit(g.LOAD_RETRY,{error:te.network(r),retryTime:n})}),v(E(e),"_end",function(){e._clear(),e._bufferService&&e._bufferService.endOfStream(),z.debug("end stream")}),v(E(e),"_resetDisconnectCount",function(){e._disconnectRetryCount=e._opts.disconnectRetryCount}),v(E(e),"_tick",function(){clearTimeout(e._tickTimer);var r=E(e),n=r.media;if(n){e._tickTimer=setTimeout(e._tick,e._tickInterval);var a=X.end(X.get(n));if(!(a<ue||!n.readyState)){var s=e._opts;if(qe(n)&&n.currentTime)e._gapService&&e._gapService.do(n,s.maxJumpDistance,e.isLive,3);else{if(!n.currentTime&&e._gapService&&s.enableStartGapJump){var l=e._opts.mseLowLatency||e._opts.mseLowLatency===!1&&e.bufferInfo(_t).nextStart;l&&e._gapService.do(n,s.maxJumpDistance,e.isLive,3);return}s.isLive&&n.readyState===4&&a-n.currentTime>s.disconnectTime&&e.disconnect()}}}}),v(E(e),"_onPlay",function(){var r,n,a=e._opts.softDecode||((r=e.media)===null||r===void 0||(n=r.buffered)===null||n===void 0?void 0:n.length);if(e.isLive){!e._loading&&a&&e.replay(void 0,!0);return}var s=e.bufferInfo();(s.start||s.nextStart)>ue&&e._tick()}),v(E(e),"_onLoadeddata",function(){e.isLive&&!e._opts.mseLowLatency&&e.media.duration!==1/0&&e._bufferService.updateDuration(1/0).catch(function(r){})}),v(E(e),"_onSeeking",x(C().mark(function r(){return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:!e.isLive&&e.seekable&&(e._preLoadEndPoint=-1,e._checkPreload());case 1:case"end":return a.stop()}},r)}))),v(E(e),"_onTimeupdate",function(){if(e.media){var r=e._opts,n=e.media.currentTime;if(r.isLive&&r.maxLatency&&r.targetLatency){var a=X.end(X.get(e.media)),s=a-n;s>=r.maxLatency&&(e.media.currentTime=a-r.targetLatency,e.emit(g.CHASEFRAME,{currentTime:e.media.currentTime,latency:r.targetLatency}))}e._seiService.throw(n,!0),!(r.isLive||!e.seekable||e._loading)&&e._checkPreload()}}),v(E(e),"_onWaiting",function(){e.isLive&&!e._loading&&e._disconnectRetryCount&&(e._disconnectRetryCount--,e.load())}),v(E(e),"_onBufferUpdate",function(){if(!e._opts.isLive){var r=e.bufferInfo(),n=r.end,a=r.nextEnd;Math.abs((n||a)-e.media.duration)<1&&(e._end(),e.media.readyState<=2&&e._tick())}}),v(E(e),"_checkPreload",x(C().mark(function r(){var n,a,s,l,u,d,m,y,S,b;return C().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(n=e.bufferInfo(),a=n.remaining,s=a===void 0?0:a,l=e._opts,u=e._keyframes.filepositions,d=e._keyframes.times,m=e.media.currentTime,!(s<l.preloadTime)){A.next=19;break}if(y=Oe(e._keyframes.times,m+s+ue),S=Oe(e._keyframes.times,m+s+e._opts.preloadTime),S===y&&(S=y+1),e._preLoadEndPoint!==S){A.next=11;break}return A.abrupt("return");case 11:if(b=u[y],b!=null){A.next=14;break}return A.abrupt("return");case 14:return A.next=16,e._mediaLoader.cancel();case 16:e._loadData(null,[b,u[S]]),e._preLoadEndPoint=S,e._bufferService.unContiguous(d[y]);case 19:case"end":return A.stop()}},r)}))),v(E(e),"_onFlvScriptData",function(r){var n,a,s,l,u=(n=r.data)===null||n===void 0||(a=n.onMetaData)===null||a===void 0?void 0:a.keyframes,d=(s=r.data)===null||s===void 0||(l=s.onMetaData)===null||l===void 0?void 0:l.duration;u&&(e._keyframes=u),!e._opts.isLive&&d&&e._bufferService.updateDuration(d)}),e._opts=mt(i),e.media=e._opts.media||document.createElement("video"),e._opts.media=null,e._firstProgressEmit=!1,e._mediaLoader=new et(U(U({},e._opts.fetchOptions),{},{retry:e._opts.retryCount,retryDelay:e._opts.retryDelay,timeout:e._opts.loadTimeout,onRetryError:e._onRetryError,onProgress:e._onProgress,responseType:"arraybuffer"})),e._disconnectRetryCount=e._opts.disconnectRetryCount,e._transferCost=new pt,e._bufferService=new vt(E(e),e._opts.softDecode?e.media:void 0,e._opts),e._seiService=new tt(E(e)),e._bandwidthService=new rt({chunkCountForSpeed:e._opts.chunkCountForSpeed,skipChunkSize:e._opts.skipChunkSize,longtimeNoReceived:e._opts.longtimeNoReceived}),e._stats=new it(E(e)),e._opts.softDecode||(e._gapService=new at),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("loadeddata",e._onLoadeddata),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e.media.addEventListener("progress",e._onBufferUpdate),e.media.addEventListener("waiting",e._onWaiting),e.on(g.FLV_SCRIPT_DATA,e._onFlvScriptData),e}return se(t,[{key:"version",get:function(){return"3.0.21"}},{key:"isLive",get:function(){return this._opts.isLive}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"seekable",get:function(){return!!this._keyframes&&this._acceptRanges}},{key:"loader",get:function(){return this._mediaLoader}},{key:"blobUrl",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.blobUrl}},{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed(),totalSize:this._bandwidthService.getTotalSize(),totalCost:this._bandwidthService.getTotalCost()}}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"bufferInfo",value:function(){var e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ue;return X.info(X.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,r)}},{key:"playbackQuality",value:function(){return nt(this.media)}},{key:"load",value:function(){var i=x(C().mark(function r(n){var a,s=arguments;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>1&&s[1]!==void 0?s[1]:!1,this._bufferService){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,this._reset(a);case 5:this._loadData(n,this._opts.isLive?[]:[0,this._opts.defaultVodLoadSize]),clearTimeout(this._tickTimer),this._tickTimer=setTimeout(this._tick,this._tickInterval);case 8:case"end":return u.stop()}},r,this)}));function e(r){return i.apply(this,arguments)}return e}()},{key:"replay",value:function(){var i=x(C().mark(function r(){var n=this,a,s,l=arguments;return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=l.length>0&&l[0]!==void 0?l[0]:this._opts.seamlesslyReload,s=l.length>1?l[1]:void 0,this.media){d.next=4;break}return d.abrupt("return");case 4:if(this._resetDisconnectCount(),!a){d.next=11;break}return d.next=8,this._clear();case 8:setTimeout(function(){n._seamlessSwitching=!0,n._loadData(n._opts.url),n._bufferService.seamlessSwitch()}),d.next=13;break;case 11:return d.next=13,this.load();case 13:return d.abrupt("return",this.media.play(!s).catch(function(){}));case 14:case"end":return d.stop()}},r,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"disconnect",value:function(){var e;return z.debug("disconnect!"),(e=this._bufferService)===null||e===void 0||e.resetSeamlessSwitchStats(),this._clear()}},{key:"switchURL",value:function(){var i=x(C().mark(function r(n,a){var s=this;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._bufferService){u.next=2;break}return u.abrupt("return");case 2:if(this._resetDisconnectCount(),!(this._loading&&a)){u.next=6;break}return this._bufferService.seamlessLoadingSwitch=function(){var d=x(C().mark(function m(y){return C().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,s._clear();case 2:s._bufferService.seamlessLoadingSwitching=!0,s._urlSwitching=!0,s._seamlessSwitching=!0,s._bufferService.seamlessSwitch(),s._loadData(n);case 7:case"end":return b.stop()}},m)}));return function(m){return d.apply(this,arguments)}}(),u.abrupt("return");case 6:if(!(!a||!this._opts.isLive)){u.next=11;break}return u.next=9,this.load(n);case 9:return this._urlSwitching=!0,u.abrupt("return",this.media.play(!0).catch(function(){}));case 11:return u.next=13,this._clear();case 13:setTimeout(function(){s._urlSwitching=!0,s._seamlessSwitching=!0,s._loadData(n),s._bufferService.seamlessSwitch()});case 14:case"end":return u.stop()}},r,this)}));function e(r,n){return i.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var i=x(C().mark(function r(){return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.media){a.next=2;break}return a.abrupt("return");case 2:return this.removeAllListeners(),this._seiService.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),this.media.removeEventListener("waiting",this._onWaiting),this.media.removeEventListener("progress",this._onBufferUpdate),a.next=12,Promise.all([this._clear(),this._bufferService.destroy()]);case 12:this.media=null,this._bufferService=null;case 14:case"end":return a.stop()}},r,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_emitError",value:function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;z.table(e),z.error(e),z.error((r=this.media)===null||r===void 0?void 0:r.error),this._urlSwitching&&(this._urlSwitching=!1,this._seamlessSwitching=!1,this.emit(g.SWITCH_URL_FAILED,e)),this.emit(g.ERROR,e),n&&(this._seiService.reset(),this._end())}},{key:"_reset",value:function(){var i=x(C().mark(function r(){var n,a=arguments;return C().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=a.length>0&&a[0]!==void 0?a[0]:!1,this._seiService.reset(),this._bandwidthService.reset(),this._stats.reset(),l.next=6,this._clear();case 6:return l.next=8,this._bufferService.reset(n);case 8:case"end":return l.stop()}},r,this)}));function e(){return i.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var i=x(C().mark(function r(n,a){var s;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n&&(this._opts.url=n),s=n=this._opts.url,n){u.next=4;break}throw new Error("Source url is missing");case 4:if(this._opts.preProcessUrl&&(s=this._opts.preProcessUrl(n).url),this._mediaLoader.finnalUrl=s,this.emit(g.LOAD_START,{url:s,seamlessSwitching:this._seamlessSwitching}),z.debug("load data, loading:",this._loading,s),!this._loading){u.next=11;break}return u.next=11,this._mediaLoader.cancel();case 11:return this._loading=!0,u.prev=12,u.next=15,this._mediaLoader.load({url:s,range:a});case 15:u.next=21;break;case 17:return u.prev=17,u.t0=u.catch(12),this._loading=!1,u.abrupt("return",this._emitError(te.network(u.t0),!1));case 21:case"end":return u.stop()}},r,this,[[12,17]])}));function e(r,n){return i.apply(this,arguments)}return e}()},{key:"_clear",value:function(){var i=x(C().mark(function r(){return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this._mediaLoader){a.next=3;break}return a.next=3,this._mediaLoader.cancel();case 3:clearTimeout(this._maxChunkWaitTimer),clearTimeout(this._tickTimer),this._loading=!1,this._firstProgressEmit=!1;case 7:case"end":return a.stop()}},r,this)}));function e(){return i.apply(this,arguments)}return e}()}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?ge.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){le.enable(),_e.enable()}},{key:"disableLogger",value:function(){le.disable(),_e.disable()}}]),t}(Ue);try{localStorage.getItem("xgd")?re.enableLogger():re.disableLogger()}catch{}var gt=function(){function f(o,t){var i=this;ne(this,f),v(this,"_onLowDecode",function(){var e,r,n,a,s=i._opts,l=s.media,u=s.innerDegrade,d=s.backupURL;(e=i._plugin)===null||e===void 0||(r=e.player)===null||r===void 0||r.emit("lowdecode",l.degradeInfo),(n=i._plugin)===null||n===void 0||(a=n.player)===null||a===void 0||a.emit("core_event",U(U({},l.degradeInfo),{},{eventName:g.LOWDECODE})),(u===1||u===3)&&d&&i._degrade(d)}),v(this,"_degrade",function(e){var r=i._plugin.player,n=r.video;if((n==null?void 0:n.TAG)==="MVideo"){var a=r.video.degradeVideo;r.video=a,n.degrade(e),e&&(r.config.url=e);var s=r.root.firstChild;s.TAG==="MVideo"&&r.root.replaceChild(a,s);var l=i._plugin.constructor.pluginName.toLowerCase();r.unRegisterPlugin(l),r.once("canplay",function(){r.play()})}}),v(this,"forceDegradeToVideo",function(e){var r=i._opts.innerDegrade;(r===1||r===3)&&i._degrade(e)}),this._opts=o,this._plugin=t,this._init()}return se(f,[{key:"_init",value:function(){var t=this._opts,i=t.media,e=t.isLive,r=t.preloadTime,n=t.innerDegrade,a=t.decodeMode;if(i){if(!e&&i.setPlayMode){i.setPlayMode("VOD");return}n&&i.setAttribute("innerdegrade",n),r&&i.setAttribute("preloadtime",r),i.setDecodeMode&&i.setDecodeMode(a),this._bindEvents()}}},{key:"_bindEvents",value:function(){var t=this._opts.media;t.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var t,i;(t=this._opts)===null||t===void 0||(i=t.media)===null||i===void 0||i.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),f}(),yt=function(f){Ie(t,f);var o=Me(t);function t(){var i;ne(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return i=o.call.apply(o,[this].concat(r)),v(E(i),"logger",z),v(E(i),"flv",null),v(E(i),"pluginExtension",null),v(E(i),"getStats",function(){var a;return(a=i.flv)===null||a===void 0?void 0:a.getStats()}),v(E(i),"destroy",function(){var a;i.flv&&(i.flv.destroy(),i.flv=null),(a=i.pluginExtension)===null||a===void 0||a.destroy(),i.pluginExtension=null}),v(E(i),"_onSwitchURL",function(a,s){if(i.flv){var l,u;i.player.config.url=a,Se(s)==="object"&&(s=s.seamless),i.flv.switchURL(a,s),!s&&(l=i.player.config)!==null&&l!==void 0&&(u=l.flv)!==null&&u!==void 0&&u.keepStatusAfterSwitch&&i._keepPauseStatus()}}),v(E(i),"_keepPauseStatus",function(){var a=i.player.paused;a&&i.player.once("canplay",function(){i.player.pause()})}),v(E(i),"_onDefinitionChange",function(a){var s=a.to;i.flv&&i.flv.switchURL(s)}),i}return se(t,[{key:"core",get:function(){return this.flv}},{key:"version",get:function(){var e;return(e=this.flv)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,r,n=(e=this.player)===null||e===void 0||(r=e.config)===null||r===void 0?void 0:r.mediaType;return!!n&&n!=="video"&&n!=="audio"&&n!=="offscreen-video"}},{key:"loader",get:function(){var e;return(e=this.flv)===null||e===void 0?void 0:e.loader}},{key:"transferCost",get:function(){return this.flv._transferCost.transferCost}},{key:"beforePlayerInit",value:function(){var e=this,r=this.player.config,n=this.player.media||this.player.video;if(r.url){this.flv&&this.flv.destroy(),this.player.switchURL=this._onSwitchURL;var a=r.flv||{};if((a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.flv=new re(U({softDecode:this.softDecode,isLive:r.isLive,media:n,preProcessUrl:function(u,d){var m,y;return((m=e.player)===null||m===void 0||(y=m.preProcessUrl)===null||y===void 0?void 0:y.call(m,u,d))||{url:u,ext:d}}},a)),this.softDecode||Ee.defineGetterOrSetter(this.player,{url:{get:function(){var u;return(u=e.flv)===null||u===void 0?void 0:u.blobUrl},configurable:!0}}),this.softDecode&&(this.pluginExtension=new gt(U({media:this.player.video,isLive:r.isLive},r.flv),this),this.player.forceDegradeToVideo=function(){for(var l,u=arguments.length,d=new Array(u),m=0;m<u;m++)d[m]=arguments[m];return(l=e.pluginExtension)===null||l===void 0?void 0:l.forceDegradeToVideo.apply(l,d)}),r.isLive){var s;(s=this.player)===null||s===void 0||s.useHooks("replay",function(){var l;return(l=e.flv)===null||l===void 0?void 0:l.replay()})}this.on(Fe,this._onSwitchURL),this.on(Ne,this.destroy),this._transError(),this._transCoreEvent(g.TTFB),this._transCoreEvent(g.LOAD_START),this._transCoreEvent(g.LOAD_RESPONSE_HEADERS),this._transCoreEvent(g.LOAD_COMPLETE),this._transCoreEvent(g.LOAD_RETRY),this._transCoreEvent(g.SOURCEBUFFER_CREATED),this._transCoreEvent(g.ANALYZE_DURATION_EXCEEDED),this._transCoreEvent(g.APPEND_BUFFER),this._transCoreEvent(g.REMOVE_BUFFER),this._transCoreEvent(g.BUFFEREOS),this._transCoreEvent(g.KEYFRAME),this._transCoreEvent(g.CHASEFRAME),this._transCoreEvent(g.METADATA_PARSED),this._transCoreEvent(g.SEI),this._transCoreEvent(g.SEI_IN_TIME),this._transCoreEvent(g.FLV_SCRIPT_DATA),this._transCoreEvent(g.STREAM_EXCEPTION),this._transCoreEvent(g.SWITCH_URL_SUCCESS),this._transCoreEvent(g.SWITCH_URL_FAILED),this.flv.load(r.url,!0)}}},{key:"_transError",value:function(){var e=this;this.flv.on(g.ERROR,function(r){e.player&&e.player.emit(Ve,new Be(e.player,r))})}},{key:"_transCoreEvent",value:function(e){var r=this;this.flv.on(e,function(n){r.player&&r.player.emit("core_event",U(U({},n),{},{eventName:e}))})}}],[{key:"pluginName",get:function(){return"flv"}},{key:"isSupported",value:function(e,r){return re.isSupported(e,r)}},{key:"isSupportedMMS",value:function(){return typeof ManagedMediaSource<"u"}}]),t}(Ee);v(yt,"Flv",re);export{oe as ERR,wt as ERR_CODE,g as EVENT,re as Flv,yt as FlvPlugin,te as StreamingError,yt as default,z as logger};
