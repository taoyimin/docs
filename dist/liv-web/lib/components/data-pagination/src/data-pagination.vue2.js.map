{"version":3,"file":"data-pagination.vue2.js","sources":["../../../../../../packages/components/data-pagination/src/data-pagination.vue"],"sourcesContent":["<template>\r\n  <el-config-provider :locale=\"zhCn\">\r\n    <el-pagination\r\n      class=\"liv-data-pagination\"\r\n      background\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      v-model:current-page=\"current\"\r\n      v-model:page-size=\"pageSize\"\r\n      @update:current-page=\"updateModelValue\"\r\n      @update:page-size=\"updateModelValue\"\r\n      v-bind=\"{ ...globalProps, ...$attrs }\" />\r\n  </el-config-provider>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"T extends Record<string | number | symbol, any>\">\r\nimport { inject, ref, watchEffect } from 'vue';\r\nimport { ElPagination, ElConfigProvider } from 'element-plus';\r\n// @ts-ignore\r\nimport zhCn from 'element-plus/dist/locale/zh-cn.mjs';\r\nimport type { DataPaginationFullProps, DataPaginationProps } from './data-pagination';\r\nimport { MakeRequired, getPropsPoxy } from '@liv-web/utils';\r\nimport { DATA_PAGINATION_KEY } from '@liv-web/constants';\r\n\r\n/**\r\n * 组件配置\r\n */\r\ndefineOptions({\r\n  name: 'LivDataPagination',\r\n});\r\n\r\n/**\r\n * 全局属性\r\n */\r\nconst globalProps = inject(DATA_PAGINATION_KEY, {});\r\n\r\n/**\r\n * 组件属性\r\n */\r\nconst props = withDefaults(defineProps<DataPaginationProps<T>>(), {\r\n  total: () => 0,\r\n  currentKey: () => 'current',\r\n  sizeKey: () => 'size',\r\n});\r\n\r\n/**\r\n * 属性代理\r\n */\r\nconst propsPoxy = getPropsPoxy<\r\n  MakeRequired<DataPaginationFullProps<T>, 'total' | 'currentKey' | 'sizeKey'>\r\n>(props, globalProps);\r\n\r\n/**\r\n * 双向绑定\r\n */\r\nconst page = defineModel<T>();\r\n\r\n/**\r\n * v-model:current绑定值\r\n */\r\nconst current = defineModel<number>('current', {\r\n  default: 1,\r\n});\r\n\r\n/**\r\n * v-model:page-size绑定值\r\n */\r\nconst pageSize = defineModel<number>('pageSize', {\r\n  default: 10,\r\n});\r\n\r\n/**\r\n * 是否触发副作用\r\n */\r\nconst noEffect = ref(false);\r\n\r\n/**\r\n * el-pagination绑定值更新\r\n */\r\nconst updateModelValue = () => {\r\n  noEffect.value = true;\r\n};\r\n\r\nwatchEffect(() => {\r\n  if (page.value) {\r\n    current.value = page.value[propsPoxy.currentKey];\r\n    pageSize.value = page.value[propsPoxy.sizeKey];\r\n  }\r\n  noEffect.value = false;\r\n});\r\n\r\nwatchEffect(() => {\r\n  if (!noEffect.value) return;\r\n  if (page.value) {\r\n    (page.value[propsPoxy.currentKey] as number) = current.value;\r\n    (page.value[propsPoxy.sizeKey] as number) = pageSize.value;\r\n  }\r\n});\r\n</script>\r\n"],"names":["inject","DATA_PAGINATION_KEY","getPropsPoxy","_useModel","ref","watchEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,IAAA,MAAM,WAAc,GAAAA,UAAA,CAAOC,6BAAqB,EAAA,EAAE,CAAA,CAAA;AAKlD,IAAA,MAAM,KAAQ,GAAA,OAAA,CAAA;AASd,IAAM,MAAA,SAAA,GAAYC,kBAEhB,CAAA,KAAA,EAAO,WAAW,CAAA,CAAA;AAKpB,IAAM,MAAA,IAAA,GAAOC,YAAe,CAAA,OAAA,EAAA,YAAA,CAAA,CAAA;AAK5B,IAAM,MAAA,OAAA,GAAUA,YAAmB,CAAA,OAAA,EAAC,SAEnC,CAAA,CAAA;AAKD,IAAM,MAAA,QAAA,GAAWA,YAAmB,CAAA,OAAA,EAAC,UAEpC,CAAA,CAAA;AAKD,IAAM,MAAA,QAAA,GAAWC,QAAI,KAAK,CAAA,CAAA;AAK1B,IAAA,MAAM,mBAAmB,MAAM;AAC7B,MAAA,QAAA,CAAS,KAAQ,GAAA,IAAA,CAAA;AAAA,KACnB,CAAA;AAEA,IAAAC,eAAA,CAAY,MAAM;AAChB,MAAA,IAAI,KAAK,KAAO,EAAA;AACd,QAAA,OAAA,CAAQ,KAAQ,GAAA,IAAA,CAAK,KAAM,CAAA,SAAA,CAAU,UAAU,CAAA,CAAA;AAC/C,QAAA,QAAA,CAAS,KAAQ,GAAA,IAAA,CAAK,KAAM,CAAA,SAAA,CAAU,OAAO,CAAA,CAAA;AAAA,OAC/C;AACA,MAAA,QAAA,CAAS,KAAQ,GAAA,KAAA,CAAA;AAAA,KAClB,CAAA,CAAA;AAED,IAAAA,eAAA,CAAY,MAAM;AAChB,MAAI,IAAA,CAAC,SAAS,KAAO,EAAA,OAAA;AACrB,MAAA,IAAI,KAAK,KAAO,EAAA;AACd,QAAC,IAAK,CAAA,KAAA,CAAM,SAAU,CAAA,UAAU,IAAe,OAAQ,CAAA,KAAA,CAAA;AACvD,QAAC,IAAK,CAAA,KAAA,CAAM,SAAU,CAAA,OAAO,IAAe,QAAS,CAAA,KAAA,CAAA;AAAA,OACvD;AAAA,KACD,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}