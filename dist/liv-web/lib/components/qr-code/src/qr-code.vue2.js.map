{"version":3,"file":"qr-code.vue2.js","sources":["../../../../../../packages/components/qr-code/src/qr-code.vue"],"sourcesContent":["<template>\r\n  <el-image\r\n    class=\"liv-qr-code\"\r\n    :style=\"{ width: propsProxy.size + 'px', height: propsProxy.size + 'px' }\"\r\n    :src=\"img\"\r\n    :preview-src-list=\"[img]\"\r\n    fit=\"cover\"\r\n    preview-teleported>\r\n    <template v-for=\"(_, name) in $slots\" #[name]=\"slotData\">\r\n      <slot :name=\"name\" v-bind=\"slotData || {}\" />\r\n    </template>\r\n  </el-image>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { inject, ref, watchEffect } from 'vue';\r\nimport { ElImage } from 'element-plus';\r\nimport type { QrCodeFullProps } from './qr-code';\r\nimport { MakeRequired, getPropsPoxy, qrCode } from '@liv-web/utils';\r\nimport { QR_CODE_KEY } from '@liv-web/constants';\r\n\r\n/**\r\n * 组件配置项\r\n */\r\ndefineOptions({\r\n  name: 'LivQrCode',\r\n});\r\n\r\n/**\r\n * 注入全局属性\r\n */\r\nconst globalProps = inject(QR_CODE_KEY, {});\r\n\r\n/**\r\n * 组件属性\r\n */\r\nconst props = withDefaults(defineProps<QrCodeFullProps>(), {\r\n  size: () => 100,\r\n  previewTeleported: () => true,\r\n});\r\n\r\n/**\r\n * 属性代理\r\n */\r\nconst propsProxy = getPropsPoxy<MakeRequired<QrCodeFullProps, 'size' | 'previewTeleported'>>(\r\n  props,\r\n  globalProps,\r\n);\r\n\r\n/**\r\n * 图片地址\r\n */\r\nconst img = ref('');\r\n\r\nwatchEffect(async () => {\r\n  if (!propsProxy.content) return (img.value = '');\r\n  try {\r\n    img.value = await qrCode.toDataURL(propsProxy.content, {\r\n      width: propsProxy.size,\r\n      margin: 0,\r\n      ...propsProxy.options,\r\n    });\r\n  } catch (err) {\r\n    console.error('[liv-web/qrcode]生成二维码图片失败！');\r\n  }\r\n});\r\n</script>\r\n"],"names":["inject","QR_CODE_KEY","getPropsPoxy","ref","watchEffect","qrCode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,IAAA,MAAM,WAAc,GAAAA,UAAA,CAAOC,qBAAa,EAAA,EAAE,CAAA,CAAA;AAK1C,IAAA,MAAM,KAAQ,GAAA,OAAA,CAAA;AAQd,IAAA,MAAM,UAAa,GAAAC,kBAAA;AAAA,MACjB,KAAA;AAAA,MACA,WAAA;AAAA,KACF,CAAA;AAKA,IAAM,MAAA,GAAA,GAAMC,QAAI,EAAE,CAAA,CAAA;AAElB,IAAAC,eAAA,CAAY,YAAY;AACtB,MAAA,IAAI,CAAC,UAAA,CAAW,OAAS,EAAA,OAAQ,IAAI,KAAQ,GAAA,EAAA,CAAA;AAC7C,MAAI,IAAA;AACF,QAAA,GAAA,CAAI,KAAQ,GAAA,MAAMC,cAAO,CAAA,SAAA,CAAU,WAAW,OAAS,EAAA;AAAA,UACrD,OAAO,UAAW,CAAA,IAAA;AAAA,UAClB,MAAQ,EAAA,CAAA;AAAA,UACR,GAAG,UAAW,CAAA,OAAA;AAAA,SACf,CAAA,CAAA;AAAA,eACM,GAAK,EAAA;AACZ,QAAA,OAAA,CAAQ,MAAM,8EAA4B,CAAA,CAAA;AAAA,OAC5C;AAAA,KACD,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}