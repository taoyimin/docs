{"version":3,"file":"index.js","sources":["../../../../../packages/utils/component/index.ts"],"sourcesContent":["import { cloneDeep } from 'lodash-es';\r\nimport { getCurrentInstance } from 'vue';\r\n\r\n/**\r\n * 获取属性代理\r\n * @param target 组件属性\r\n * @param globalProps 全局属性\r\n * @returns\r\n */\r\nexport function getPropsPoxy<T extends Record<string | symbol, any>>(target: T, globalProps: any) {\r\n  const propsDefaults: Record<string | symbol, any> | undefined =\r\n    // @ts-ignore\r\n    getCurrentInstance()?.propsDefaults;\r\n  return new Proxy<T>(target, {\r\n    get: (target, prop, receiver) => {\r\n      const value = Reflect.get(target, prop, receiver);\r\n      if (value !== undefined && propsDefaults?.[prop] === undefined) {\r\n        // 在组件上设置了该属性值\r\n        if (typeof globalProps?.[prop] === 'object' && typeof value === 'object') {\r\n          // 如果该属性是对象，则合并后返回\r\n          return Object.assign(cloneDeep(globalProps[prop]), value);\r\n        } else {\r\n          return value;\r\n        }\r\n      } else {\r\n        // 优先取全局配置属性，没有则取默认值\r\n        return globalProps?.[prop] ?? value;\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * 校验权限\r\n * @param checkAuthority 权限校验方法\r\n * @param authoritys 单个权限标识或权限标识集合\r\n * @returns\r\n */\r\nexport function checkAuthoritys(\r\n  checkAuthority: (authority: string) => boolean,\r\n  authoritys: string | string[] | undefined,\r\n) {\r\n  if (!authoritys || (Array.isArray(authoritys) && authoritys.length === 0)) {\r\n    return true;\r\n  } else {\r\n    if (Array.isArray(authoritys)) {\r\n      let hasAuthority = false;\r\n      for (const authority of authoritys) {\r\n        if (checkAuthority(authority)) {\r\n          hasAuthority = true;\r\n          break;\r\n        }\r\n      }\r\n      return hasAuthority;\r\n    } else {\r\n      return checkAuthority(authoritys);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 根据order属性进行排序，如果order是`undefined`，则按照默认传入顺序进行排序\r\n * @param a 需要排序对象的order属性\r\n * @param b 需要排序对象的order属性\r\n * @returns 排序结果\r\n */\r\nexport function sortByOrder(a: number | undefined, b: number | undefined) {\r\n  if (a === undefined && b === undefined) {\r\n    return 0;\r\n  } else if (a === undefined && b !== undefined) {\r\n    return 1;\r\n  } else if (a !== undefined && b === undefined) {\r\n    return -1;\r\n  } else {\r\n    return a! - b!;\r\n  }\r\n}\r\n"],"names":["getCurrentInstance","target","_a","cloneDeep"],"mappings":";;;;;AASgB,SAAA,YAAA,CAAqD,QAAW,WAAkB,EAAA;AATlG,EAAA,IAAA,EAAA,CAAA;AAUE,EAAM,MAAA,aAAA;AAAA;AAAA,IAEJ,CAAA,EAAA,GAAAA,sBAAA,OAAA,IAAsB,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,aAAA;AAAA,GAAA,CAAA;AACxB,EAAO,OAAA,IAAI,MAAS,MAAQ,EAAA;AAAA,IAC1B,GAAK,EAAA,CAACC,OAAQ,EAAA,IAAA,EAAM,QAAa,KAAA;AAdrC,MAAAC,IAAAA,GAAAA,CAAAA;AAeM,MAAA,MAAM,KAAQ,GAAA,OAAA,CAAQ,GAAID,CAAAA,OAAAA,EAAQ,MAAM,QAAQ,CAAA,CAAA;AAChD,MAAA,IAAI,KAAU,KAAA,KAAA,CAAA,IAAA,CAAa,aAAgB,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,aAAA,CAAA,IAAA,CAAA,MAAU,KAAW,CAAA,EAAA;AAE9D,QAAA,IAAI,QAAO,WAAc,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,WAAA,CAAA,IAAA,CAAA,CAAA,KAAU,QAAY,IAAA,OAAO,UAAU,QAAU,EAAA;AAExE,UAAA,OAAO,OAAO,MAAO,CAAAE,kBAAA,CAAU,YAAY,IAAI,CAAC,GAAG,KAAK,CAAA,CAAA;AAAA,SACnD,MAAA;AACL,UAAO,OAAA,KAAA,CAAA;AAAA,SACT;AAAA,OACK,MAAA;AAEL,QAAA,OAAA,CAAOD,GAAA,GAAA,WAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,WAAA,CAAc,IAAd,CAAA,KAAA,IAAA,GAAAA,GAAuB,GAAA,KAAA,CAAA;AAAA,OAChC;AAAA,KACF;AAAA,GACD,CAAA,CAAA;AACH,CAAA;AAQgB,SAAA,eAAA,CACd,gBACA,UACA,EAAA;AACA,EAAI,IAAA,CAAC,cAAe,KAAM,CAAA,OAAA,CAAQ,UAAU,CAAK,IAAA,UAAA,CAAW,WAAW,CAAI,EAAA;AACzE,IAAO,OAAA,IAAA,CAAA;AAAA,GACF,MAAA;AACL,IAAI,IAAA,KAAA,CAAM,OAAQ,CAAA,UAAU,CAAG,EAAA;AAC7B,MAAA,IAAI,YAAe,GAAA,KAAA,CAAA;AACnB,MAAA,KAAA,MAAW,aAAa,UAAY,EAAA;AAClC,QAAI,IAAA,cAAA,CAAe,SAAS,CAAG,EAAA;AAC7B,UAAe,YAAA,GAAA,IAAA,CAAA;AACf,UAAA,MAAA;AAAA,SACF;AAAA,OACF;AACA,MAAO,OAAA,YAAA,CAAA;AAAA,KACF,MAAA;AACL,MAAA,OAAO,eAAe,UAAU,CAAA,CAAA;AAAA,KAClC;AAAA,GACF;AACF,CAAA;AAQgB,SAAA,WAAA,CAAY,GAAuB,CAAuB,EAAA;AACxE,EAAI,IAAA,CAAA,KAAM,KAAa,CAAA,IAAA,CAAA,KAAM,KAAW,CAAA,EAAA;AACtC,IAAO,OAAA,CAAA,CAAA;AAAA,GACE,MAAA,IAAA,CAAA,KAAM,KAAa,CAAA,IAAA,CAAA,KAAM,KAAW,CAAA,EAAA;AAC7C,IAAO,OAAA,CAAA,CAAA;AAAA,GACE,MAAA,IAAA,CAAA,KAAM,KAAa,CAAA,IAAA,CAAA,KAAM,KAAW,CAAA,EAAA;AAC7C,IAAO,OAAA,CAAA,CAAA,CAAA;AAAA,GACF,MAAA;AACL,IAAA,OAAO,CAAK,GAAA,CAAA,CAAA;AAAA,GACd;AACF;;;;;;"}