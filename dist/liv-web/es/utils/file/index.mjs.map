{"version":3,"file":"index.mjs","sources":["../../../../../packages/utils/file/index.ts"],"sourcesContent":["import SparkMD5 from 'spark-md5';\r\n\r\n/**\r\n * [根据文件路径获取文件名](https://k8s.nccxgh.com:9096/docs/utils/file-method.html#getfilename)\r\n * @param path 文件的相对路径\r\n * @returns 文件名\r\n * @example\r\n * ```ts\r\n * import { getFileName } from 'liv-web'\r\n * \r\n * const relativeUrl = '/server/file/test.png';\r\n * const fileName = getFileName(relativeUrl);\r\n * console.log(fileName); // 输出test.png\r\n```\r\n */\r\nexport const getFileName = (path: string): string => {\r\n  if (!path) return '';\r\n  return path.split('/').pop() ?? path;\r\n};\r\n\r\n// 通过文件流获取唯一标识md5\r\nexport const getMd5ByFile = (file: File) => {\r\n  return new Promise<string>(resolve => {\r\n    // 读取文件\r\n    const fileReader = new FileReader();\r\n    fileReader.readAsArrayBuffer(file);\r\n\r\n    fileReader.onload = e => {\r\n      const buffer = e.target?.result;\r\n\r\n      const spark = new SparkMD5.ArrayBuffer();\r\n      spark.append(buffer as ArrayBuffer);\r\n\r\n      // 获取文件md5\r\n      const md5 = spark.end() + new Date().getTime();\r\n\r\n      resolve(md5);\r\n    };\r\n  });\r\n};\r\n"],"names":[],"mappings":";;AAea,MAAA,WAAA,GAAc,CAAC,IAAyB,KAAA;AAfrD,EAAA,IAAA,EAAA,CAAA;AAgBE,EAAI,IAAA,CAAC,MAAa,OAAA,EAAA,CAAA;AAClB,EAAA,OAAA,CAAO,UAAK,KAAM,CAAA,GAAG,CAAE,CAAA,GAAA,OAAhB,IAAyB,GAAA,EAAA,GAAA,IAAA,CAAA;AAClC,EAAA;AAGa,MAAA,YAAA,GAAe,CAAC,IAAe,KAAA;AAC1C,EAAO,OAAA,IAAI,QAAgB,CAAW,OAAA,KAAA;AAEpC,IAAM,MAAA,UAAA,GAAa,IAAI,UAAW,EAAA,CAAA;AAClC,IAAA,UAAA,CAAW,kBAAkB,IAAI,CAAA,CAAA;AAEjC,IAAA,UAAA,CAAW,SAAS,CAAK,CAAA,KAAA;AA3B7B,MAAA,IAAA,EAAA,CAAA;AA4BM,MAAM,MAAA,MAAA,GAAA,CAAS,EAAE,GAAA,CAAA,CAAA,MAAA,KAAF,IAAU,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,MAAA,CAAA;AAEzB,MAAM,MAAA,KAAA,GAAQ,IAAI,QAAA,CAAS,WAAY,EAAA,CAAA;AACvC,MAAA,KAAA,CAAM,OAAO,MAAqB,CAAA,CAAA;AAGlC,MAAA,MAAM,MAAM,KAAM,CAAA,GAAA,sBAAY,IAAA,IAAA,IAAO,OAAQ,EAAA,CAAA;AAE7C,MAAA,OAAA,CAAQ,GAAG,CAAA,CAAA;AAAA,KACb,CAAA;AAAA,GACD,CAAA,CAAA;AACH;;;;"}